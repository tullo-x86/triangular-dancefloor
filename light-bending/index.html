<!DOCTYPE html>
<html>
    <head>
        <title>Three on the floor</title>
        <link rel="stylesheet" type="text/css" href="dfloor.css" />
        <script src="jquery-2.1.3.min.js"></script>
        <script src="jquery.svg.js"></script>
        <script src="jquery.svgdom.js"></script>
        <script src="triangles.js"></script>
        <script src="hsv.js"></script>
        <style type="text/css" id="colourStyles">
            /* Programmatically-defined colour styles */
        </style>
        
        <script type="text/javascript">
            $(function() {

                defineHsvStyles($('#colourStyles')[0].sheet);

                var df = new Dancefloor();

                df.createRowAt(-5, -1, 1);
                df.createRowAt(-4, -2, 2);
                df.createRowAt(-3, -10, 10);
                df.createRowAt(-2, -9, 9);
                df.createRowAt(-1, -8, 8);
                df.createRowAt(0, -7, 7);
                df.createRowAt(1, -7, 7);
                df.createRowAt(2, -8, 8);
                df.createRowAt(3, -8, 8);
                df.createRowAt(4, -3, 3);
                df.createRowAt(5, -2, 2);
                df.createRowAt(6, -1, 1);
                df.createRowAt(7, -0, 0);

                // TODO: Try defining triangles as { centrepoint, distance } since
                //       they're all equilateral...

                // Corner colours
                df.getTriSolid(4, -3, 3, true).setH(1);   // top
                df.getTriSolid(-3, -10, -4, true).setH(3); // left
                df.getTriSolid(-3, 4, 10, true).setH(5);   // right

                // Red pseudoborder
                df.getTriPerimeter(3, -9, 9, false)
                          .add(df.getTriSolid(2, -6, -4, false))
                          .add(df.getTriSolid(2, 4, 6, false))
                          .add(df.getTriSolid(-3, -1, 1, false))
                          .setH(0);

                // Lit border
                df.getTriPerimeter(-3, -10, 10, true).setV(6);
                df.getTriPerimeter(-2, -7, 7, true).setV(5);
                df.getTriPerimeter(-1, -4, 4, true).setV(4);

                window.df = df;
            });
        </script>
        <style type="text/css">
            #swatches {
                border: 1px solid black;
                display: none;
            }
            .hue-row {
                border: 1px solid lime;
            }
            .sat-row {
                border: 1px solid blue;
            }
            .swatch {
                width: 40px;
                height: 40px;
                display: inline-block;
                margin: 10px;
            }
        </style>
    </head>
    <body>
        <!-- root-3 / 2 == 0.866025403784 -->
        <!-- scaled x50 == 43.3012701892 -->
        <h1>Three on the floor - <span id="tricount"></span></h1>
        <svg id="df" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <line x1="50%" y1="0" 
                  x2="50%" y2="100%" 
                  stroke="white" 
                  stroke-width="2"/>
            <line x1="0%" y1="300px" 
                  x2="100%" y2="300px" 
                  stroke="white" 
                  stroke-width="2"/>
            <g id="all">
                <g id="tris">
                    <!-- Triangles go here -->
                </g>
                <g id="text">
                    <!-- Text goes here -->
                </g>
            </g>
        </svg>
        <div id="swatches"></div>
    </body>
</html>